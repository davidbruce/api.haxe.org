<!DOCTYPE html>
<html lang="en"><!-- use theme color or fallback -->
<!--use textcolor from settings, otherwise create a contrasting color to theme color-->
<head><meta charset="utf-8"/><link href="../../bootstrap/css/bootstrap.min.css" rel="stylesheet"/><link href="../../bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet"/><link href="../../bootstrap/css/bootstrap-select.min.css" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,700italic,400italic" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600,600italic,400" rel="stylesheet" type="text/css"/><link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css" rel="stylesheet" type="text/css"/><script src="../../jquery-1.9.1.min.js"></script><script src="../../bootstrap/js/bootstrap.min.js"></script><script src="../../bootstrap/js/bootstrap-select.min.js"></script><link href="../../styles.css" rel="stylesheet"/><link href="../../extra-styles.css" rel="stylesheet"/><link href="../../haxe-nav.css" rel="stylesheet"/><script>var dox = {rootPath: "../../",platforms: ["cs","php","js","neko","cpp","macro","java","lua","python","hl","flash"]};</script><script src="../../nav.js"></script><script src="../../index.js"></script><link rel="icon" href="../../favicon.ico" type="image/x-icon"/><title>eval.vm.Gc - Haxe server_tasks API</title><meta name="description" content="Memory management control and statistics; finalised values."/><link rel="canonical" href="https://api.haxe.org/v/server_tasks/eval/vm/Gc.html"/><style>
.main-content { margin-top:65px; }
.nav-list>.active>a.treeLink, .nav-list>.active>a.treeLink:hover, .nav-list>.active>a.treeLink:focus { background:#F48821; color:#fff; text-shadow:0 0 0 transparent; }
</style></head><body><nav class="section nav dark"><div class="navbar navbar-fixed-top navbar-inverse"><div class="navbar-inner"><button class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse" type="button"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button><a class="brand haxe-logo" href="https://haxe.org/"><img alt="Haxe" height="21" onerror="this.src='https://haxe.org/img/haxe-logo-horizontal-on-dark.png'" src="https://haxe.org/img/haxe-logo-horizontal-on-dark.svg" width="107"/></a><a class="brand sub lib" href="../../">API</a><div class="nav-collapse collapse"><ul class="nav"><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="/">Version server_tasks @ fe0916c <b class="caret"></b></a><ul class="dropdown-menu"><li class=""><a href="/v/3.2.1/">3.2.1</a></li><li class=""><a href="/v/3.3/">3.3</a></li><li class=""><a href="/v/3.4.2/">3.4.2</a></li><li class=""><a href="/v/3.4.4/">3.4.4</a></li><li class=""><a href="/v/3.4.5/">3.4.5</a></li><li class=""><a href="/v/3.4.6/">3.4.6</a></li><li class=""><a href="/v/3.4.7/">3.4.7</a></li><li class=""><a href="/v/4.0.0/">4.0.0</a></li><li class=""><a href="/v/4.0.5/">4.0.5</a></li><li class=""><a href="/">4.1.0</a></li><li><a href="/v/development" class="">Development</a></li></ul></li><li class="divider"></li><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="https://haxe.org/documentation/">Learn Haxe <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="https://haxe.org/documentation/introduction/" rel="external">Introduction</a></li><li><a href="https://haxe.org/manual/" rel="external">Manual</a></li><li><a href="https://code.haxe.org" rel="external">Code Cookbook</a></li><li class="active"><a href="https://api.haxe.org" rel="external">API Documentation</a></li><li class="divider"></li><li><a href="https://haxe.org/videos/" rel="external">Videos</a></li><li class="divider"></li><li><a href="https://try.haxe.org" rel="external">Try Haxe online</a></li><li><a href="https://lib.haxe.org" rel="external">Haxelib</a></li></ul></li><li class=" dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Connect <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="https://github.com/HaxeFoundation" rel="external"><i class="fa fa-github"></i> Github</a></li><li><a href="https://github.com/HaxeFoundation/haxe/issues" rel="external"><i class="fa fa-github"></i> Bug reports</a></li><li><a href="https://stackoverflow.com/questions/tagged/haxe" rel="external"><i class="fa fa-stack-overflow"></i> Stack Overflow</a></li><li><a href="http://community.haxe.org/" rel="external"><i class="fa fa-envelope-o"></i> Forums</a></li><li><a href="https://discordapp.com/invite/0uEuWH3spjck73Lo" rel="external nofollow"><i class="fa fa-comments-o"></i> Discord</a></li><li><a href="https://gitter.im/HaxeFoundation/haxe" rel="external nofollow"><i class="fa fa-comments-o"></i> Gitter</a></li><li><a href="https://haxe.org/blog"><i class="fa fa-rss"></i> Blog</a></li><li class="divider"></li><li><a href="https://www.facebook.com/haxe.org/" rel="external"><i class="fa fa-facebook"></i> Facebook</a></li><li><a href="https://twitter.com/search?q=%23haxe" rel="external"><i class="fa fa-twitter"></i> #haxe</a></li><li><a href="https://twitter.com/haxelang" rel="external"><i class="fa fa-twitter"></i> @haxelang</a></li><li><a href="https://twitter.com/haxe_org" rel="external"><i class="fa fa-twitter"></i> @haxe_org</a></li><li class="divider"></li><li><a href="https://haxe.org/foundation/contact.html">Contact</a></li></ul></li></ul></div></div></div></nav><div class="container main-content"><div class="row-fluid"><div class="span3"><div class="well sidebar-nav"><form class="form-search" id="searchForm"><div class="input-prepend input-block-level"><span class="add-on"><i class="icon-search"></i></span><input id="search" type="text" placeholder="Filter (Ctrl+P)" autocomplete="off"/></div></form><div class="dropdown"><select id="select-platform" class="selectpicker" title="Filter by platform" data-width="100%"><option value="all" selected="selected">All Platforms</option><option>cs</option><option>php</option><option>js</option><option>neko</option><option>cpp</option><option>macro</option><option>java</option><option>lua</option><option>python</option><option>hl</option><option>flash</option></select></div></div><div class="well sidebar-nav" id="explorer"><div id="nav"></div></div></div><div class="span9"><div class="page-header"><span class="viewsource"><a href="https://github.com/HaxeFoundation/haxe/blob/server_tasks/std/eval/vm/Gc.hx" class="btn btn-medium"><i class="fa fa-eye"></i> View source</a></span><h1><small>class</small> Gc</h1><h4><small>package <a href="../../eval/vm/index.html">eval.vm</a></small></h4>    <hr/><p class="availability"><em>Available on  macro</em></p></div><div class="body"><div class="doc doc-main"><p>Memory management control and statistics; finalised values.</p></div><h3 class="section">Static methods</h3><div class="fields"><div class="field "><a name="allocated_bytes"></a><h3 class="anchor"><code><span class="label label-static">static</span><a href="#allocated_bytes"><span class="identifier">allocated_bytes</span></a>():<a class="type" title="Float - The standard Float type, this is a double-precision IEEE 64bit float." href="../../Float.html">Float</a></code></h3><div class="doc"><p>Return the total number of bytes allocated since the program was started. It is returned as a float to avoid overflow problems with int on 32-bit machines.</p></div></div><div class="field "><a name="compact"></a><h3 class="anchor"><code><span class="label label-static">static</span><a href="#compact"><span class="identifier">compact</span></a>():<a class="type" title="Void - The standard Void type." href="../../Void.html">Void</a></code></h3><div class="doc"><p>Perform a full major collection and compact the heap. Note that heap compaction is a lengthy operation.</p></div></div><div class="field "><a name="counters"></a><h3 class="anchor"><code><span class="label label-static">static</span><a href="#counters"><span class="identifier">counters</span></a>():{promoted_words:<a class="type" title="Float - The standard Float type, this is a double-precision IEEE 64bit float." href="../../Float.html">Float</a>, minor_words:<a class="type" title="Float - The standard Float type, this is a double-precision IEEE 64bit float." href="../../Float.html">Float</a>, major_words:<a class="type" title="Float - The standard Float type, this is a double-precision IEEE 64bit float." href="../../Float.html">Float</a>}</code></h3><div class="doc"><p>Return (minor_words, promoted_words, major_words). This function is as fast as quick_stat.</p></div></div><div class="field "><a name="finalise"></a><h3 class="anchor"><code><span class="label label-static">static</span><a href="#finalise"><span class="identifier">finalise</span></a>&lt;<span class="type">T</span>&gt;(<span style="white-space:nowrap">f:<span class="type">T</span>&nbsp;&#8209;&gt;&nbsp;<a class="type" title="Void - The standard Void type." href="../../Void.html">Void</a>,</span> <span style="white-space:nowrap">v:<span class="type">T</span></span>):<a class="type" title="Void - The standard Void type." href="../../Void.html">Void</a></code></h3><div class="doc"><p>Registers f as a finalisation function for v. v must be heap-allocated. f will be called with v as argument at some point between the first time v becomes unreachable (including through weak pointers) and the time v is collected by the GC. Several functions can be registered for the same value, or even several instances of the same function. Each instance will be called once (or never, if the program terminates before v becomes unreachable).
The GC will call the finalisation functions in the order of deallocation. When several values become unreachable at the same time (i.e. during the same GC cycle), the finalisation functions will be called in the reverse order of the corresponding calls to finalise. If finalise is called in the same order as the values are allocated, that means each value is finalised before the values it depends upon. Of course, this becomes false if additional dependencies are introduced by assignments.</p>
<p>In the presence of multiple OCaml threads it should be assumed that any particular finaliser may be executed in any of the threads.</p></div></div><div class="field "><a name="full_major"></a><h3 class="anchor"><code><span class="label label-static">static</span><a href="#full_major"><span class="identifier">full_major</span></a>():<a class="type" title="Void - The standard Void type." href="../../Void.html">Void</a></code></h3><div class="doc"><p>Do a minor collection, finish the current major collection cycle, and perform a complete new cycle. This will collect all currently unreachable blocks.</p></div></div><div class="field "><a name="get"></a><h3 class="anchor"><code><span class="label label-static">static</span><a href="#get"><span class="identifier">get</span></a>():<a class="type" title="eval.vm.Control - The GC parameters are given as a control record." href="../../eval/vm/Control.html">Control</a></code></h3><div class="doc"><p>Return the current values of the GC parameters in a control record.</p></div></div><div class="field "><a name="major"></a><h3 class="anchor"><code><span class="label label-static">static</span><a href="#major"><span class="identifier">major</span></a>():<a class="type" title="Void - The standard Void type." href="../../Void.html">Void</a></code></h3><div class="doc"><p>Do a minor collection and finish the current major collection cycle.</p></div></div><div class="field "><a name="major_slice"></a><h3 class="anchor"><code><span class="label label-static">static</span><a href="#major_slice"><span class="identifier">major_slice</span></a>():<a class="type" title="Void - The standard Void type." href="../../Void.html">Void</a></code></h3><div class="doc"><p>Do a minor collection and a slice of major collection. n is the size of the slice: the GC will do enough work to free (on average) n words of memory. If n = 0, the GC will try to do enough work to ensure that the next automatic slice has no work to do. This function returns an unspecified integer (currently: 0).</p></div></div><div class="field "><a name="minor"></a><h3 class="anchor"><code><span class="label label-static">static</span><a href="#minor"><span class="identifier">minor</span></a>():<a class="type" title="Void - The standard Void type." href="../../Void.html">Void</a></code></h3><div class="doc"><p>Trigger a minor collection.</p></div></div><div class="field "><a name="print_stat"></a><h3 class="anchor"><code><span class="label label-static">static</span><a href="#print_stat"><span class="identifier">print_stat</span></a>(<span style="white-space:nowrap">out_channel:<a class="type" title="haxe.io.Output - An Output is an abstract write." href="../../haxe/io/Output.html">Output</a></span>):<a class="type" title="Void - The standard Void type." href="../../Void.html">Void</a></code></h3><div class="doc"><p>Print the current values of the memory management counters (in human-readable form) into the channel argument.</p></div></div><div class="field "><a name="quick_stat"></a><h3 class="anchor"><code><span class="label label-static">static</span><a href="#quick_stat"><span class="identifier">quick_stat</span></a>():<a class="type" title="eval.vm.Stat - The memory management counters are returned in a stat record." href="../../eval/vm/Stat.html">Stat</a></code></h3><div class="doc"><p>Same as stat except that live_words, live_blocks, free_words, free_blocks, largest_free, and fragments are set to 0. This function is much faster than stat because it does not need to go through the heap.</p></div></div><div class="field "><a name="set"></a><h3 class="anchor"><code><span class="label label-static">static</span><a href="#set"><span class="identifier">set</span></a>(<span style="white-space:nowrap">r:<a class="type" title="eval.vm.Control - The GC parameters are given as a control record." href="../../eval/vm/Control.html">Control</a></span>):<a class="type" title="Void - The standard Void type." href="../../Void.html">Void</a></code></h3><div class="doc"><p>Changes the GC parameters according to the control record r.</p></div></div><div class="field "><a name="stat"></a><h3 class="anchor"><code><span class="label label-static">static</span><a href="#stat"><span class="identifier">stat</span></a>():<a class="type" title="eval.vm.Stat - The memory management counters are returned in a stat record." href="../../eval/vm/Stat.html">Stat</a></code></h3><div class="doc"><p>Return the current values of the memory management counters in a stat record. This function examines every heap block to get the statistics.</p></div></div></div></div></div></div></div><footer class="section dark site-footer"><div class="container"><div class="copyright"><p>This documentation is generated for version server_tasks @ fe0916c</p><p>&copy; 2020 &nbsp;<a href="https://haxe.org/foundation/" title="Haxe Foundation Website" rel="external" class="hf-link">Haxe Foundation</a> |&nbsp;<a href="https://github.com/HaxeFoundation/haxe" rel="external" title="Haxe on Github">Contribute to Haxe</a></p></div></div></footer><script src="../..//highlighter.js"></script><link href="../../highlighter.css" rel="stylesheet"/><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-30943311-8"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);} gtag('js', new Date());gtag('config', 'UA-30943311-8');</script></body></html>